<!DOCTYPE html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <title>BuildPro Admin — Панель</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Montserrat -->
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700;800&display=swap"
      rel="stylesheet"
    />

    <!-- Bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Icons -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
      rel="stylesheet"
    />

    <style>
      body {
        background: #f7f7f7;
        font-family: "Montserrat", sans-serif;
      }

      .sidebar {
        width: 250px;
        background: white;
        height: 100vh;
        position: fixed;
        top: 0;
        left: 0;
        border-right: 1px solid #eee;
        padding-top: 30px;
      }

      .sidebar a {
        display: block;
        padding: 12px 25px;
        color: #444;
        font-weight: 600;
        text-decoration: none;
        transition: 0.2s;
      }

      .sidebar a:hover {
        background: #ffe5e3;
        color: #fe766a;
      }

      .sidebar .active {
        background: #fe766a;
        color: white;
        border-radius: 0;
      }

      .content {
        margin-left: 250px;
        padding: 40px;
      }

      .stat-card {
        border-radius: 14px;
        background: white;
        padding: 25px;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.07);
        border: 1px solid #eee;
        transition: 0.2s;
      }

      .stat-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 10px 24px rgba(0, 0, 0, 0.12);
      }

      .stat-icon {
        font-size: 32px;
        color: #fe766a;
      }

      .btn-accent {
        background-color: #fe766a;
        border: none;
        font-weight: 600;
      }
      .btn-accent:hover {
        background-color: #e44f48;
        color: #fff;
      }
    </style>
  </head>

  <body>
    <!-- ========== SIDEBAR ========== -->
    <div class="sidebar">
      <h3 class="text-center mb-4 fw-bold" style="color: #fe766a">
        BuildPro Admin
      </h3>

      <a class="active" href="dashboard.html"
        ><i class="bi bi-speedometer2 me-2"></i> Панель</a
      >
      <a href="messages.html"
        ><i class="bi bi-envelope-paper me-2"></i> Повідомлення</a
      >
      <a href="projects.html"><i class="bi bi-hammer me-2"></i> Проєкти</a>
      <a href="#" id="logoutBtn" class="text-danger mt-5"
        ><i class="bi bi-box-arrow-right me-2"></i> Вийти</a
      >
    </div>

    <!-- ========== CONTENT ========== -->
    <div class="content">
      <h2 class="fw-bold mb-4">Панель адміністратора</h2>

      <div class="row g-4">
        <!-- Статистика повідомлень -->
        <div class="col-md-4">
          <div class="stat-card">
            <i class="bi bi-envelope-paper stat-icon"></i>
            <h4 class="mt-3 fw-bold">Повідомення</h4>
            <p id="msgCount" class="text-muted mb-1">…</p>
            <a href="messages.html" class="btn btn-accent btn-sm"
              >Переглянути</a
            >
          </div>
        </div>

        <!-- Статистика проєктів -->
        <div class="col-md-4">
          <div class="stat-card">
            <i class="bi bi-images stat-icon"></i>
            <h4 class="mt-3 fw-bold">Проєкти</h4>
            <p id="projCount" class="text-muted mb-1">…</p>
            <a href="projects.html" class="btn btn-accent btn-sm">Керувати</a>
          </div>
        </div>

        <!-- Додати проєкт -->
        <div class="col-md-4">
          <div class="stat-card">
            <i class="bi bi-plus-square stat-icon"></i>
            <h4 class="mt-3 fw-bold">Додати новий</h4>
            <p class="text-muted mb-1">Створити новий запис</p>
            <a href="projects.html#add" class="btn btn-accent btn-sm">Додати</a>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Перевірка токена
      const token = localStorage.getItem("token");
      if (!token) window.location.href = "/admin/login.html";

      // Завантаження статистики
      async function loadStats() {
        try {
          const messages = await fetch(
            "http://localhost:5000/api/messages"
          ).then((r) => r.json());
          const projects = await fetch(
            "http://localhost:5000/api/projects"
          ).then((r) => r.json());

          document.getElementById("msgCount").textContent =
            messages.length + " повідомлень";
          document.getElementById("projCount").textContent =
            projects.length + " проєктів";
        } catch {
          document.getElementById("msgCount").textContent = "Помилка";
          document.getElementById("projCount").textContent = "Помилка";
        }
      }

      loadStats();

      // Вихід
      document.getElementById("logoutBtn").addEventListener("click", () => {
        localStorage.removeItem("token");
        window.location.href = "/admin/login.html";
      });
    </script>
  </body>
</html>
